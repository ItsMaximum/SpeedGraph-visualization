id: flourish/horserace
name: Horserace chart
author: Flourish & Google News Lab teams
description: A simple “horserace” chart template for showing changing rank over time

sdk_version: 2

build:
  src:
    script: npm run build
    directory: src
    files:
      - rollup.config.js
  less:
    script: npm run less
    directory: less

settings:
  - Axes
  - property: is_rank
    name: Show ranks
    type: boolean
  - property: target_position
    name: Starting position
    type: number
    min: 1
  - property: flip_rank
    name: Higher scores win
    description: Uncheck this if lower scores beat higher scores (eg. race times)
    type: boolean
  - Lines
  - property: line_width
    name: Line width
    type: number
  - property: line_opacity
    name: Line opacity
    type: number
  - property: shade
    name: Show shading behind line
    type: boolean
  - property: shade_width
    name: Shading width
    type: number
  - property: shade_opacity
    name: Shading opacity
    type: number
  - property: curve
    name: Curve
    description: Choose from [[curveLinear]], [[curveMonotoneX]], [[curveMonotoneY]], [[curveNatural]], [[curveStep]], [[curveStepAfter]] or [[curveStepBefore]]
    type: string

  - Circles and labels
  - property: start_circle_r
    name: Start circle radius
    type: number
  - property: end_circle_r
    name: End circle radius
    type: number
  - property: rank_font_size
    name: Rank font size
    type: number
  - property: label_font_size
    name: Label font size
    type: number
  - property: use_image
    name: Use image
    type: boolean

  - Colors
  - property: bgcolor
    name: Background color
    type: color
  - property: palette
    name: Color scheme
    description: Choose a d3 color scheme, such as [[schemeCategory20]], [[schemeCategory20b]], [[schemeCategory20c]] or [[schemeCategory10]]
    type: string

  - Animation
  - property: duration
    name: Animation duration
    description: The animation speed, milliseconds per timeslice
    type: number
    min: 0
    step: 100

  - Margins
  - property: margin_top
    name: Top
    type: number
    min: 0
    step: 10
  - property: margin_right
    name: Right
    type: number
    min: 0
    step: 10
  - property: margin_bottom
    name: Bottom
    type: number
    min: 0
    step: 10
  - property: margin_left
    name: Left
    type: number
    min: 0
    step: 10

data:
  - Data
  - name: Name column
    dataset: horserace
    key: name
    type: column
    column: "Data::A"
  - name: Picture column
    dataset: horserace
    key: pic
    type: column
    column: "Data::B"
  - name: Times
    dataset: horserace
    key: times
    type: columns
    columns: "Data::C-G"
